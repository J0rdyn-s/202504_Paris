<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Travel Schedule</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      .tabs {
        display: flex;
        overflow-x: auto;
      }
      .tab {
        padding: 10px;
        cursor: pointer;
        white-space: nowrap;
      }
      .tab.active {
        font-weight: bold;
        border-bottom: 2px solid #000;
      }
      .schedule {
        padding: 15px;
      }
      .schedule-item {
        margin-bottom: 10px;
      }
      .ticket-link {
        color: blue;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="tabs" id="tabs"></div>
    <div class="schedule" id="schedule">Select a date to view the schedule.</div>

    <script>
      const dates = ["20250411", "20250412", "20250413", "20250414", "20250415", "20250416", "20250417", "20250418", "20250419", "20250420", "20250421"];

      function createTabs() {
        const tabsContainer = document.getElementById("tabs");
        dates.forEach((date, index) => {
          const tab = document.createElement("div");
          tab.className = "tab";
          tab.textContent = `${date.substring(0, 4)}-${date.substring(4, 6)}-${date.substring(6, 8)}`;
          tab.onclick = () => {
            loadSchedule(date);
            document.querySelectorAll(".tab").forEach((t) => t.classList.remove("active"));
            tab.classList.add("active");
          };
          tabsContainer.appendChild(tab);

          if (index === 0) tab.click(); // Load first day's schedule by default
        });
      }

      function loadSchedule(date) {
        fetch(`daily_schedule/${date}_Schedule.json`) // ‚Üê updated path here!
          .then((response) => {
            if (!response.ok) throw new Error(`Failed to load: daily_schedule/${date}_Schedule.json`);
            return response.json();
          })
          .then((data) => {
            const scheduleContainer = document.getElementById("schedule");
            scheduleContainer.innerHTML = "";
            data.forEach((item) => {
              const div = document.createElement("div");
              div.className = "schedule-item";

              let content = item.time ? `<strong>${item.time}</strong>: ` : `<strong>[Time TBA]</strong> `;
              content += item.event;

              if (item.ticket) {
                content += ` <a href="${item.ticket}" class="ticket-link" target="_blank">üéüÔ∏è Ticket</a>`;
              }

              div.innerHTML = content;
              scheduleContainer.appendChild(div);
            });
          })
          .catch((err) => {
            document.getElementById("schedule").innerHTML = "Schedule not available.";
            console.error(err);
          });
      }

      // Initialize tabs on page load
      document.addEventListener("DOMContentLoaded", createTabs);
    </script>
  </body>
</html>
